# 局域网 HTTP 环境下开启摄像头权限

在局域网内通过 `http://192.168.x.x:9000` 访问 POS 系统时，浏览器默认禁止非 HTTPS 页面调用摄像头。  
按以下步骤配置后，无需搭建 HTTPS 即可正常使用摄像头扫码功能。

---

## Chrome / Edge（安卓手机同适用）

1. 在地址栏输入并访问：
   ```
   chrome://flags/#unsafely-treat-insecure-origin-as-secure
   ```
   Edge 用户将 `chrome` 替换为 `edge` 即可：
   ```
   edge://flags/#unsafely-treat-insecure-origin-as-secure
   ```

2. 在出现的输入框中填入 POS 系统的局域网地址（替换为实际 IP）：
   ```
   http://192.168.1.100:9000
   ```
   多个地址用英文逗号分隔。

3. 将右侧下拉框从 `Default` 改为 **`Enabled`**。

4. 点击右下角 **`Relaunch`** 按钮重启浏览器。

5. 重新访问 POS 系统，摄像头按钮即可正常弹出授权请求。

> **安卓手机**：在手机 Chrome 地址栏同样输入 `chrome://flags/#unsafely-treat-insecure-origin-as-secure`，操作步骤完全一致。

---

## Firefox（桌面版）

1. 在地址栏输入并访问：
   ```
   about:config
   ```

2. 点击 **"接受风险并继续"**。

3. 在搜索框中输入：
   ```
   media.devices.insecure.enabled
   ```

4. 找到该条目后，点击右侧切换按钮，将值改为 **`true`**。

5. **无需重启**，直接刷新 POS 页面即可。

---

## 安卓手机 Firefox

安卓版 Firefox（Fenix 内核）的 `about:config` 页面存在渲染 bug，直接访问可能显示**一片白**，属于已知问题。

**方法一：带参数直接跳到目标配置项（推荐）**

在地址栏输入以下带过滤参数的地址（跳过白屏问题）：
```
about:config?filter=media.devices.insecure.enabled
```
页面会直接显示该配置项，点击右侧切换按钮改为 `true` 即可。

**方法二：改装 Firefox Nightly（稳定支持 about:config）**

1. 在 Google Play 或手机应用市场搜索 **Firefox Nightly** 并安装
2. 直接访问 `about:config`，不会出现白屏问题，后续步骤同桌面版

**方法三：放弃 Firefox，改用安卓 Chrome（最省事）**

安卓手机上 Chrome 的 `chrome://flags` 方案更可靠，参照上方「Chrome / Edge」章节操作。

> 如果上述方法均无效，建议直接使用 **安卓 Chrome**，完全规避 Firefox 安卓版的兼容问题。

---

## 注意事项

- 以上配置仅对填写的特定地址生效，不会影响浏览器整体安全策略。
- 如果局域网 IP 发生变化（路由器重启后 DHCP 重新分配），需要更新 Chrome flags 里填写的地址。
- 建议在路由器上为 POS 主机绑定固定 IP（静态 DHCP），避免 IP 变动。
